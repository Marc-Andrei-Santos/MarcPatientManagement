@model EL.MedicationEntity

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Edit Record";
}

<h2>Edit Record</h2>
<hr />

<div>
    @using (Html.BeginForm(
        "Edit",
        "Medication",
        new { area = "Medication" },
        FormMethod.Post,
        new { id = "editForm" }
    ))
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(m => m.Id, new { id = "Id" })

        <div class="mb-3">
            @Html.LabelFor(m => m.Dosage)
            @Html.TextBoxFor(m => m.Dosage, new
       {
               @class = "form-control",
               style = "width:350px;",
               step = "0.0001",
               oninput = "this.value=this.value.replace(/[^0-9.]/g,'')",
               autofocus = "autofocus",
               id = "Dosage"
       })
        </div>

        <div class="mb-3">
            @Html.LabelFor(m => m.Drug)
            @Html.TextBoxFor(m => m.Drug, new
            {
                @class = "form-control",
                style = "width:350px;",
                id = "Drug"
            })
        </div>

        <div class="mb-3">
            @Html.LabelFor(m => m.Patient)
            @Html.TextBoxFor(m => m.Patient, new
            {
                @class = "form-control",
                style = "width:350px;",
                id = "Patient"
            })
        </div>

        <div style="width:350px; margin-top:20px; text-align:left;">
            <button type="button" id="updateBtn"
                    style="background: #e3e3e3; color: #000; border: 1px solid #aaa; padding: 6px 12px; font-size: 0.85rem; border-radius: 5px; cursor: pointer; transition: 0.2s; margin-left: 59px;">
                Save
            </button>

            <button type="button" id="clearAllBtn"
                    style="background: #e3e3e3; color: #000; border: 1px solid #aaa; padding: 6px 12px; font-size: 0.85rem; border-radius: 5px; cursor: pointer; transition: 0.2s;">
                Clear All
            </button>

            @Html.ActionLink("Cancel", "Index", "Medication", new { area = "Medication" }, new
       {
           style = "background:#e3e3e3; color:#000; border:1px solid #aaa; padding:6px 12px; font-size:0.85rem; border-radius:5px; text-decoration:none; display:inline-block; transition:0.2s;"
       })
        </div>
    }
</div>

<!-- Confirmation Modal -->
<div class="modal fade" id="confirmUpdateModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Confirm</h5>
            </div>
            <div class="modal-body">
                Are you sure you want to update this record?
            </div>
            <div class="modal-footer">
                <button type="button" id="cancelUpdate"
                        style="background:#e3e3e3; color:#000; border:1px solid #aaa; padding:6px 12px; font-size:0.85rem; border-radius:5px; cursor:pointer; transition:0.2s;">
                    Cancel
                </button>

                <button type="button" id="confirmUpdate"
                        style="background:#e3e3e3; color:#000; border:1px solid #aaa; padding:6px 12px; font-size:0.85rem; border-radius:5px; cursor:pointer; transition:0.2s;">
                    Yes
                </button>
            </div>
        </div>
    </div>
</div>

@section scripts {
    <script>
        window.checkDuplicateUrl = '@Url.Action("CheckDuplicate", "Medication", new { area = "Medication" })';
    </script>
}
