@model EL.MedicationEntity

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "New Record";
}

<h2>New Record</h2>
<hr />

<div>
    @using (Html.BeginForm(
        "Create",
        "Medication",
        new { area = "Medication" },
        FormMethod.Post,
        new { id = "createForm" }
    ))
    {
        @Html.AntiForgeryToken()

        <div class="mb-3">
            @Html.LabelFor(m => m.Dosage)
            @Html.TextBoxFor(m => m.Dosage, new
       {
           @class = "form-control",
           style = "width:350px;",
           step = "0.0001",
           oninput = "this.value=this.value.replace(/[^0-9.]/g,'')",
           autofocus = "autofocus",
           id = "Dosage"
       })
        </div>

        <div class="mb-3">
            @Html.LabelFor(m => m.Drug)
            @Html.TextBoxFor(m => m.Drug, new
            {
                @class = "form-control",
                style = "width:350px;",
                id = "Drug"
            })
        </div>

        <div class="mb-3">
            @Html.LabelFor(m => m.Patient)
            @Html.TextBoxFor(m => m.Patient, new
            {
                @class = "form-control",
                style = "width:350px;",
                title = "Patient name is required",
                id = "Patient"
            })
        </div>

        <div style="width:350px; margin-top:20px; text-align:left;">
            <button type="button" id="saveBtn"
                    style="background: #e3e3e3; color: #000; border: 1px solid #aaa; padding: 6px 12px; font-size: 0.85rem; border-radius: 5px; cursor: pointer; transition: 0.2s; margin-left: 75px;">
                Save
            </button>

            <button type="button" id="clearAllBtn"
                    style="background: #e3e3e3; color: #000; border: 1px solid #aaa; padding: 6px 12px; font-size: 0.85rem; border-radius: 5px; cursor: pointer; transition: 0.2s;">
                Clear All
            </button>

            @Html.ActionLink("Cancel", "Index", "Medication", new { area = "Medication" }, new
       {
           style = "background:#e3e3e3; color:#000; border:1px solid #aaa; padding:6px 12px; font-size:0.85rem; border-radius:5px; text-decoration:none; display:inline-block; transition:0.2s;"
       })
        </div>
    }
</div>

<!-- Confirmation Modal -->
<div class="modal fade" id="confirmModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Confirm</h5>
            </div>
            <div class="modal-body">
                Are you sure you want to add this record?
            </div>
            <div class="modal-footer">
                <button type="button" id="cancelSave"
                        style="background:#e3e3e3; color:#000; border:1px solid #aaa; padding:6px 12px; font-size:0.85rem; border-radius:5px; cursor:pointer; transition:0.2s;">
                    Cancel
                </button>

                <button type="button" id="confirmSave"
                        style="background:#e3e3e3; color:#000; border:1px solid #aaa; padding:6px 12px; font-size:0.85rem; border-radius:5px; cursor:pointer; transition:0.2s;">
                    Yes
                </button>
            </div>
        </div>
    </div>
</div>

@section scripts {
    <script>
        window.checkDuplicateUrl = '@Url.Action("CheckDuplicate", "Medication", new { area = "Medication" })';
    </script>
    <script src="~/Scripts/Page/Medication/Create.js"></script>
}
